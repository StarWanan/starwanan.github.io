## 题型

- 填空 25个
- 选择 10个
- 判断 10个
- 简答 5-6个
- 综合 3个



## 考点

>  考试根据考研重点出题。



## 概述

[[操作系统的概念与理解]]

- 操作系统是计算机系统中的一个**系统软件**，管理和控制计算机系统中的**硬件和软件资源**，合理地组织计算机的**工作流程**，以便有效利用这些资源为用户提供一个**功能强大、使用方便的工作环境**，从而在计算机与用户之间起**接口**的作用



作业概念

- 用户在一次解题或一个事务处理过程中要求计算机系统所做工作的集合。它包括用户程序、所需要的数据及控制命令等。作业是由一系列有序的作业步组成的



## 进程 & 线程
[[进程与线程]]

进程、线程（概念填空）

- 进程：是一个具有一定**独立**功能的程序关于某个数据集合的一次**运行**活动，是系统进行资源分配和调度的基本单位
- 线程：**进程内的一个执行单位**，**进程内的一个可调度的实体**




抢占、非抢占的区别
- 非抢占：让进程运行直到结束或阻塞的调度方式   容易实现   适合专用系统，不适合通用系统
  - 非抢占方式引起进程调度的因素
    - 进程执行完毕，或发生某件事而不能继续执行
    - 执行中的进程提出I/O请求而暂停执行
    - 进程通信或同步过程中执行了某种原语操作
- 抢占：允许将逻辑上可继续运行的在运行过程暂停的调度方式   可防止单一进程长时间独占CPU   系统开销大（降低途径：硬件实现进程切换，或扩充主存以贮存大部分程序）
  - 抢占原则
    - 优先权原则。优先级高的进程抢占处理机
    - 短作业优先原则
    - 时间片原则



进程调度算法
- 先来先服务（FCFS）
- 短作业优先（SJF）
- 优先级调度（PSA）
- 高相应比优先调度（HRRN）
- 时间片轮转（RR）
- 多级队列调度
- 多级反馈队列调度（FB）


[[死锁]]
死锁条件
- 互斥条件。进程所竞争的资源必须被互斥使用
- 请求与保持条件。当前已拥有资源的进程，仍能申请新的资源，而且，当该进程因新的资源被其他进程占用而阻塞时，它对自己已获得的资源仍保持不放
- 不剥夺条件。进程已获得的资源，只能在使用完时自动释放，而不能被抢占
- 环路等待条件。存在一个至少包含两个进程的循环等待链，链中的每个进程都正在等待下一个进程所占有的资源。




利用银行家算法避免死锁
- 可用资源向量Available
- 最大需求矩阵Max
- 分配矩阵Allocation
- 需求矩阵Need

当 $P_i$ 进程发出起源请求 $Request_i$ 后, 银行家算法进行检查:

- $Request_i \le Need_i$ , 继续执行.  否则请求资源超过实际需要, 出错.
-  $Request_i \le Available_i$ , 继续执行.  否则表示上午足够资源, 进程 $P_i$ 必须等待
- 系统尝试把资源分给 $P_i$ 修改数据结构中的值. 
- 系统执行安全性算法, 检查此次资源分配后系统是否处于安全状态
  - 安全: 正式将资源分配
  - 不安全: 试探分配作废, 恢复原来的资源分配状态, 让进程$P_i$ 等待.


安全性算法:

- 设置两个工作向量: 
  - `work` m个元素, 表示安全性检查过程中系统可提供给进程的各类资源数目, 初值等于 Available
  - `finish` n个元素, 表示系统是否有足够的资源分配给各个进程, 使之运行完成. 处置全为 false

- 进程集合中找到一个能满足下述两个条件的进程

  ```cpp
  Finish[i] = false;
  Need_i <= work
  ```
  找到: 下一步
  找不到: 下下步

- 进程 $P_i$ 获得资源, 顺利执行, 直至完成, 释放分配给它的资源:

  ```cpp
  work[j] = work[j] + Allocation[i,j];
  Finish[i] = true;
  ```
  转到上一步

- 如果所有进程的 `Finish[i] = true` 表示系统处于安全状态;  否则系统处于不安全状态. 




## 存储
段、页式（填空选择）
[[存储管理]]




## 虚拟存储器

局部性原理
指程序在执行时将呈现出局部性规律, 即在一较短的时间内, 程序的执行仅局限于某个部分. 相应地, 它所访问的存储空间也仅局限于某个区域
- 时间局部性. 如果程序中的某一条指令一旦执行, 则不久后该指令可能再次执行; 如果某个数据被访问, 则不久后该数据可能再次被访问. 典型原因: 程序中存在着大量的==循环操作==
- 空间局部性. 一旦程序访问了某个存储单元, 则不久后其附近的存储单元也将被访问, 即程序在一段时间内所访问的地址可能集中在一定范围内. 典型情况: 程序的==顺序执行==



虚存管理
- 请求分页
- 请求分段





置换算法: 选择换出页面的算法
- 最佳(OPT)置换算法
- 先进先出(FIFO)置换算法
- 最近最久未使用(LRU)置换算法
- 最少使用(LFU)置换算法
- 页面缓冲算法(PBA)

[[时钟置换算法]]



逻辑地址 —— 物理地址 转换





## 设备管理

### IO控制方式

#### 程序直接控制方式

计算机从外部设备读取数据到存储器，每次读一个字的数据，对读入的每个字，CPU都要对外没状态进行==循环检查==，知道确定该字已经在I设备控制器的数据寄存器中。

读写单位：==字==

优点：容易实现，操作简单

缺陷∶CPU高速性和IO设备的低速性的矛盾（降低了CPU的利用率），CPU和IO设备只能串行工作

#### 中断驱动方式

允许IO设备主动打断CPU的运行并请求服务，进而==解放CPU==，使其向IO控制器发送读命令后可以继续做其他有用的工作

读写单位∶==字==

优点∶比程序直接控制方式有效

缺点：数据的传输必须要经过CPU，仍然后消耗CPU的时间

#### DMA方式

在IO设备和内存之间开辟直接的数据交换通路，==彻底解放CPU==

读写单位：==数据块==

设备==直接送入内存==

只有当一个或多个数据块开始和结束的时候，CPU才会进行干预

命令/状态寄存器（CR）：用于接收CPU发送的IO命令和有关控制信息或者设备状态

内存地址寄存器（MAR）：数据直接在设备与内存之间交互

数据寄存器（DR）：用于暂存从设备到内存或者从内存到设备的数据

数据计数器（DC） ：存放本次要传送的字（节）数

#### 通道控制方式

设置一个专门负责输入/输出的处理机（DMA方式的发展），实现对一组数块的读写以及相关控制和管理为单位干预

读写单位：==一组块==

优点：有效的提高了系统资源利用率

缺点：实现较为复杂

#### DMA与通道的区别

DMA需要==CPU来控制==传输的数据块大小、传输的内存位置、而通道方式中这些信息是由==通道控制==的

DMA控制器对应一台设备与内存传递数据，通道可以控制多态设备与内存的数据交换



- 程序I/O方式
- 中断方式
- DMA方式
- I/O通道方式

![](https://s1.vika.cn/space/2022/12/12/24358abb10a74841ae12c14f1b13f404)

#### I/O通道方式

是MDA方式的发展，可进一步减少CPU的干预，即把一个对数据块的读写为单位的干预，减少为对一组数据块的读写及有关的控制和管理为单位的干预。
同时，又可实现CPU、通道和I/O设备三者并行的操作，从而更有效地提高整个系统地资源利用率


![](https://s1.vika.cn/space/2022/12/12/72f5bcc2c86f49dc9aa22a2548be0a2d)





### 设备管理：spooling系统
#### 目的

缓解CPU 与IO的速度差异矛盾

要实现SPOOLing 技术，必须要有多道程序技术的支持

#### 输入井和输出井

输入井用来收容IO设备的数据

输出井用来模拟输出时的磁盘

#### 输入缓冲区和输出缓冲区

输入缓冲区：暂存由输入设备送来的数据

输出缓冲区：暂存从输出井送来的设备

#### 输入进程和输出进程

输入进程∶模拟脱机输入时的外围控制机，将用户要求的数据从输入机通过输入缓冲区送到输入并中，当CPU需要数据，直接将输出井中的数据送入内存

输出进程：模拟脱机输出时的外围控制机，把用户要求输出的数据先从内存送到输出井中，待输出设备空闲时，再将输出井中的数据经过输出缓冲区送到输出设备

#### 特点

提高了IO速度

独占设备变成了共享设备

实现了虚拟设备功能

通俗一点就是，如果设备被占用，我们就先把数据暂存一下，等到设备空闲了就把这些数据输送到设备中
![](https://s1.vika.cn/space/2022/12/12/ce0bf20e601c4f48bffab98bd1fcb26b)



磁盘调度算法（可能大题）

- FCFS：先来先服务
- SSTF：最短寻找时间有限
- SCAN：扫描算法
- LOOK调度算法
- C-SCAN：循环扫描算法
- C-LOOK调度算法



索引文件的优缺点

为每个文件建立一个索引表，等级分配给该文件的所有物理块号，而文件FCB的物理地址字段中则添上指向该索引表的指针

- 优点：打开文件时可将索引表读入内存，可在内存中查找分配给某个逻辑块的物理快号 —— 支持高效随机存取
- 缺点：索引表本身要花费较多外存空间


文件存储空间的分配技术
索引分配
- 支持文件的直接存取
- 能满足文件的动态增长
- 多级索引可以支持大型文件的存取



- 文件过小时，索引节点利用率低
- 文件太大时，建立多级索引会花费很长时间，而且需要海量存储







